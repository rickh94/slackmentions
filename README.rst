slackmentions
=============
Provides functions for dealing with mentions in slack messages.

Installation
============
__SOON__
``$ pip install slackmentions``

You will also need the `slackclient
<https://github.com/slackapi/python-slackclient>`_ package for this to be
useful.

Usage
=====
Available functions:

findpeople:
    Finds username mentions in slack text and creates `SlackPerson
    <https://github.com/rickh94/slackperson>`_ objects
    for those people. Returns a list of those SlackPerson objects.
    This can be used to get more information about users or if the same text
    will be processed multiple times.

    Arguments:

    text: text to find @ mentions in.

    userlist: output of slack api users.list

    silent: slackperson.SlackDataError will be raised if a mention is found
    in the text but not in the userlist. Setting to True will swallow this
    error and ignore that mention.

    Returns: List of SlackPerson objects or empty list.

mention_text:
    Replaces username mentions in text with user id mentions for tagging by
    slack api message sending.

    Arguments:

    text: The text containing @ mentions

    people: A list of SlackPerson objects for people found in the text. If not
    specified, one will be generated by passing text and userlist to
    findpeople. Required if userlist is not provided.

    userlist: The json from slack api users.list. Required if people is not
    provided.

clean_text:
    simply deletes all @ mentions from the text.


.. code::

  import slackmentions
  from slackclient import SlackClient

  sc = SlackClient(os.environ['SLACK_API_TOKEN'])
  userlist = sc.api_call('users.list')
  text = 'hi @joe, could you tell @kathy to call me?'

  people = slackmentions.findpeople(text, userlist)
  # people = [SlackPerson(userid='U0000001', username='joe'),
              SlackPerson(userid='U0000002', username='kathy')]
  withmentions = slackmentions.mention_text(text, people=people)
  # withmentions = 'hi <@U0000001>, could you please tell <@U0000002> to call
  me?'
  withmentions2 = slackmentions.mention_text(text, userlist=userlist)
  assert withmentions = withmentions2

  cleantext = slackmentions.clean_text(text, people=people)
  # cleantext = 'hi, could you please tell to call me?'


If a username is not found in the slack channel, SlackDataError will
propogate up from SlackPerson.

